window.__require=function t(i,e,s){function n(r,h){if(!e[r]){if(!i[r]){var a=r.split("/");if(a=a[a.length-1],!i[a]){var l="function"==typeof __require&&__require;if(!h&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var c=e[r]={exports:{}};i[r][0].call(c.exports,function(t){return n(i[r][1][t]||t)},c,c.exports,t,i,e,s)}return e[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<s.length;r++)n(s[r]);return n}({fungame:[function(t,i){"use strict";cc._RF.push(i,"e3bb9sAmpZCn5ZiSTF6DOCm","fungame"),cc.Class({extends:cc.Component,properties:{itemListArr:[cc.Node],sys_Sprites:[cc.SpriteFrame],winLineArr:[cc.Node],des_lab:cc.Label,win_lab:cc.Label,mycoins_lab:cc.Label,bet_lab:cc.Label,close_btn:cc.Button,start_btn:cc.Button,spin_btn:cc.Button,max_btn:cc.Button,add_btn:cc.Button,sub_btn:cc.Button,start_node:cc.Node,game_node:cc.Node},onLoad:function(){var t=this;this.results=[],this.isRolling=!1,this.rows=3,this.lines=[[0,0,0,0,0],[1,1,1,1,1],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2]],this.bet_value=50,this.betarray=[50,100,200,300,500,800,1e3,2e3],this.mycoins=1e4*Math.random()+2e4,this.mycoins=100*Math.floor(this.mycoins/100),this.win_lab.string="",this.add_btn.node.on("click",this.onAddBet,this),this.sub_btn.node.on("click",this.onSubBet,this),this.start_btn.node.on("click",this.showgame,this),this.close_btn.node.on("click",this.hideGame,this),this.max_btn.node.on("click",this.onMaxBet,this),this.updateUI(),this.itemListArr.forEach(function(i){i.getComponent("list").resultSpriteFrames=t.sys_Sprites}),this.showorhideWinlines(),this.hideGame()},hideGame:function(){this.start_node.active=!0,this.game_node.active=!1},showgame:function(){this.start_node.active=!1,this.game_node.active=!0},updateUI:function(){this.mycoins_lab.string=this.mycoins.toString(),this.bet_lab.string=this.bet_value.toString()},onAddBet:function(){if(!this.isRolling){var t=this.betarray.indexOf(this.bet_value);t<this.betarray.length-1&&(this.bet_value=this.betarray[t+1],this.updateUI())}},onSubBet:function(){if(!this.isRolling){var t=this.betarray.indexOf(this.bet_value);t>0&&(this.bet_value=this.betarray[t-1],this.updateUI())}},onMaxBet:function(){this.isRolling||(this.bet_value=Math.max.apply(Math,this.betarray),this.updateUI())},startSpin:function(){var t=this;this.des_lab.string="",this.showorhideWinlines(),this.bet_value<=0?this.des_lab.string="Please set a bet value!":this.bet_value>this.mycoins?this.des_lab.string="Not enough coins!":this.isRolling||(this.isRolling=!0,this.results=this.generateResults(),this.win_lab.string="",this.mycoins-=this.bet_value,this.updateUI(),this.itemListArr.forEach(function(i,e){var s=i.getComponent("list");t.showorhideItemLight(i.children,!1),t.scheduleOnce(function(){s.startSlowRoll(t.results[e],function(){e===t.itemListArr.length-1&&t.onAllStopped()})},.15*e)}))},quickSpin:function(){var t=this;this.des_lab.string="",this.showorhideWinlines(),this.bet_value<=0?this.des_lab.string="Please set a bet value!":this.bet_value>this.mycoins?this.des_lab.string="Not enough coins!":this.isRolling||(this.isRolling=!0,this.results=this.generateResults(),this.win_lab.string="",this.mycoins-=this.bet_value,this.updateUI(),this.itemListArr.forEach(function(i,e){var s=i.getComponent("list");t.scheduleOnce(function(){s.startFastRoll(t.results[e],function(){e===t.itemListArr.length-1&&t.onAllStopped()})},.1*e)}))},generateResults:function(){var t=[],i=this.itemListArr.length,e=this.rows,s=this.sys_Sprites.length;if(Math.random()<.3)for(var n=Math.floor(Math.random()*this.lines.length),o=this.lines[n],r=Math.floor(Math.random()*s),h=0;h<i;h++){for(var a=[],l=0;l<e;l++)if(l===o[h])a.push(r);else{var c=Math.floor(Math.random()*s);c===r&&(c=(c+1)%s),a.push(c)}t.push(a)}else for(var u=0;u<i;u++){for(var d=[],f=0;f<e;f++)d.push(Math.floor(Math.random()*s));t.push(d)}return t},onAllStopped:function(){var t=this;this.isRolling=!1;var i=this.checkLineWins(this.results);if(i.length>0){var e=0;i.forEach(function(i){e+=t.bet_value*(i.lineIndex+1)}),this.mycoins+=e,this.updateUI(),this.win_lab.string=e.toString(),this.playWinEffect(i)}else this.win_lab.string=""},checkLineWins:function(t){for(var i=[],e=0;e<this.lines.length;e++){for(var s=this.lines[e],n=t[0][s[0]],o=!0,r=1;r<t.length;r++)if(t[r][s[r]]!==n){o=!1;break}o&&i.push({lineIndex:e,symbol:n})}return i},playWinEffect:function(t){var i=this;if(t&&0!==t.length){this.spin_btn.interactable=!1;var e=[];t.forEach(function(t){for(var s=i.lines[t.lineIndex],n=0;n<i.itemListArr.length;n++){var o=i.itemListArr[n],r=o.getComponent("list");if(r&&r.getItemNode){var h=r.getItemNode(s[n]);h&&e.push(h)}else o.children&&o.children[s[n]]&&e.push(o.children[s[n]])}});var s=3*e.length;(function n(o,r){if(0!==e.length){var h=e[o%e.length];cc.tween(h).to(.2,{scale:.65,opacity:90}).to(.2,{scale:1,opacity:255}).call(function(){r<s-1?(n((o+1)%e.length,r+1),i.isRolling=!0):(e.forEach(function(t){cc.tween(t).to(.2,{scale:.75,opacity:150}).to(.2,{scale:1,opacity:255}).start()}),i.showorhideWinlines(t),i.showorhideItemLight(e,!0))}).start()}})(0,0)}},showorhideItemLight:function(t,i){t&&0!==t.length&&t.forEach(function(t){if(i){var e=t.getChildByName("light_bg");e.active=!0,cc.tween(e).to(.5,{opacity:90}).to(.5,{opacity:255}).union().repeatForever().start()}else t.getChildByName("light_bg").active=!1})},showorhideWinlines:function(t){var i=this;t&&t.length>0?t.forEach(function(t){for(var e=0;e<i.winLineArr.length;e++)t.lineIndex==e?(i.winLineArr[e].active=!0,i.isRolling=!1,i.spin_btn.interactable=!0):i.winLineArr[e].active=!1}):this.winLineArr.forEach(function(t){t.active=!1,i.spin_btn.interactable=!0})}}),cc._RF.pop()},{}],list:[function(t,i){"use strict";function e(t,i){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=s(t))||i&&t&&"number"==typeof t.length){e&&(t=e);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,i){if(t){if("string"==typeof t)return n(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,i):void 0}}function n(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,s=new Array(i);e<i;e++)s[e]=t[e];return s}cc._RF.push(i,"0db37Yv781Cl4DDscI5YJ31","list"),cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,itemCount:5,cellHeight:160,scrollSpeed:3e3,deceleration:1600,alignIndex:2},onLoad:function(){this.items=[],this.resultIndex=0,this.resultIDs=[],this.totalScroll=0,this.speed=0,this.isRolling=!1,this.locked=!1,this.initialPositions=[],this.initItems()},reset:function(){var t=this;this.isRolling=!1,this.locked=!1,this.totalScroll=0,this.speed=0,Math.floor(this.itemCount/2),this.node.y=160,this.resultIDs=[],this.items.forEach(function(i,e){i.y=t.initialPositions[e],i.curindex=e,i.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=t.getRandomSprite()})},initItems:function(){for(var t=Math.floor(this.itemCount/2),i=0;i<this.itemCount;i++){var e=cc.instantiate(this.itemPrefab);e.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.getRandomSprite(),e.parent=this.node;var s=(t-i)*this.cellHeight;e.y=s,e.curindex=i,this.initialPositions.push(s),this.items.push(e)}},getRandomSprite:function(){var t=this.resultSpriteFrames;return t[Math.floor(Math.random()*t.length)]},update:function(t){if(this.isRolling){var i=this.speed*t;this.node.children.forEach(function(t){t.y-=i}),this.totalScroll+=i,this.speed=Math.max(this.speed-this.deceleration*t,0),this.handleItemLoop(),0===this.speed&&(this.isRolling=!1,this.alignToResult())}},handleItemLoop:function(){for(var t,i=this.cellHeight*this.itemCount,s=i/2,n=e(this.items);!(t=n()).done;){var o=t.value;o.y<-s?(o.y+=i,this.locked||(o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.getRandomSprite())):o.y>s&&(o.y-=i,this.locked||(o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.getRandomSprite()))}},setResultItems:function(t){var i=this,e=Math.floor(this.itemCount/2),s=0;this.items.filter(function(n,o){o>=e-1&&o<=e+1&&(n.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=i.resultSpriteFrames[t[s]],s++)})},getItemNode:function(t){var i=Math.floor(this.itemCount/2)-1+t;return i>=0&&i<this.items.length?this.items[i]:null},startFastRoll:function(t,i){this.isRolling||(this.reset(),this.resultIDs=t,this.totalScroll=0,this.locked=!0,this.isRolling=!1,this.setResultItems(this.resultIDs),cc.tween(this.node).to(.25,{y:0}).call(function(){i&&i()}).start())},startSlowRoll:function(t,i){var e=this;this.isRolling||(this.reset(),this.resultIDs=t,this.totalScroll=0,this.locked=!1,this.speed=this.scrollSpeed,this.isRolling=!0,this.scheduleOnce(function(){e.locked=!0,e.setResultItems(e.resultIDs),cc.tween(e.node).delay(.1).to(.25,{y:e.node.y-40}).to(.05,{y:70}).call(function(){i&&i(),e.adjustPositionsForSeamless()}).start()},1.5))},alignToResult:function(){this.node.y=70;var t=this.calculateOffsetForAlignment();this.items.forEach(function(i){i.y+=t}),this.isRolling=!1,this.locked=!0,this.totalScroll=0,this.speed=0,this.adjustPositionsForSeamless()},calculateOffsetForAlignment:function(){var t=this.initialPositions[this.alignIndex];return this.items[this.alignIndex].y-t},adjustPositionsForSeamless:function(){var t=this,i=this.cellHeight*this.itemCount;this.items.forEach(function(e,s){var n=e.y-t.initialPositions[s];(n=(n%i+i)%i)>i/2&&(n-=i),e.y=t.initialPositions[s]+n})}}),cc._RF.pop()},{}]},{},["fungame","list"]);